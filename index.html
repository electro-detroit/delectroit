<!DOCTYPE html>
<html>
<head>
    <!--Bootstrap framework-->
    <!-- Bootstrap CSS (needed for modal styling) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- jQuery (required by jQuery UI) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery UI files -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
    <!-- jQuery UI Touch js (required for touchscreen use) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
    <!--Leaflet CSS (latest)-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@latest/dist/leaflet.css" />
    <!--Leaflet JS (latest)-->
    <script src="https://unpkg.com/leaflet@latest/dist/leaflet.js"></script>

    <!-- Leaflet Time-Slider plugin (SliderControl) -->
    <script src="js/SliderControl.js"></script>

    <title>Delectroit</title>

  <style>
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0; }

  /* reserve space for the fixed navbar (increase to match taller navbar) */
  /* increased top padding to match taller translucent navbar */
  body { padding-top: 160px; /* keep navbar space */ overflow: hidden; } /* disable page scrolling */

  /* taller purple navbar with centered title */
  .navbar.fixed-top{
    /* purple with a little translucency */
    background: linear-gradient(90deg, rgba(111,66,193,0.92), rgba(142,68,204,0.90)) !important;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    height: 160px;
    box-shadow: 0 10px 24px rgba(111,66,193,0.12);
  }
  .navbar .container-fluid { position: relative; }

  /* center the brand/title in the navbar */
  .navbar-brand {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    font-weight: 700;
    font-size: 1.5rem;
    color: #fff !important;
    letter-spacing: 0.4px;
  }

  /* move the toggler to the right so it doesn't sit left of the centered title */
  .navbar-toggler {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
  }

  /* make the map fill the remaining viewport under the navbar and prevent page scroll */
  .map { height: calc(100vh - 160px); min-height: 0; max-height: none; }
  /* option B (alternate): fixed px height, e.g. 600px */
  /* .map { height: 600px; } */

  /* Bootstrap-icon marker styling */
  .bi-marker {
    font-size: 24px;        /* adjust marker size */
    color: #6f42c1;         /* purple marker color */
    line-height: 1;
    display: inline-block;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  }

  /* popup color overrides (light purple background, darker purple border/text) */
  .leaflet-popup-content-wrapper {
    background: #f3e8ff;            /* light purple background */
    color: #2e1050;                 /* popup text color */
    border: 2px solid #6f42c1;      /* purple border */
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(111,66,193,0.18);
  }
  .leaflet-popup-tip,
  .leaflet-popup-tip-container {
    /* make the pointer match the popup background */
    color: #f3e8ff;
  }
  .leaflet-popup-content {
    margin: 8px 12px;
    font-size: 14px;
  }
  .leaflet-popup-close-button {
    color: #6f42c1;                 /* close button color */
    text-shadow: none;
  }

  /* optional: style any headings inside popups */
  .leaflet-popup-content h5,
  .leaflet-popup-content strong {
    color: #40105a;
    margin: 0 0 6px 0;
  }

  /* popup image styling - add this so images inside popups look good */
  .leaflet-popup-content .popup-img{
    width: 100%;
    max-height: 140px;
    object-fit: cover;
    display: block;
    margin: 0 0 8px 0;
    border-radius: 6px;
  }
  .popup-center {
    text-align: center;
  }
  </style>

</head>
<body>

<!-- Top navigation bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">Delectroit</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTop" aria-controls="navbarTop" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarTop">
      <ul class="navbar-nav ms-auto align-items-center">
         <!-- only keep About in the top navbar -->
         <li class="nav-item">
           <a class="nav-link" id="about-link" href="about.html">About</a>
         </li>
        <li class="nav-item">
          <a class="nav-link" id="teams-link" href="teams.html">Teams</a>
        </li>
       </ul>
    </div>
  </div>
</nav>

<div id="map" class="map"></div>
<!-- example content below the map so page can scroll -->
<main class="container py-4">
  <section class="section-card">
    <h2>More content</h2>
    <p>Add your page content here — longer content will produce vertical scroll.</p>
  </section>
</main>

<!-- Nav modal -->
<div class="modal fade" id="navModal" tabindex="-1" aria-labelledby="navModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <div style="width:100%; display:flex; align-items:center; gap:12px;">
          <div style="flex:1; background:linear-gradient(90deg,#6f42c1,#8e44cc); color:#fff; padding:10px 14px; border-radius:6px;">
            <h5 class="modal-title mb-0" id="navModalLabel">Delectroit — Navigation</h5>
            <small id="navModalSub" class="d-block" style="opacity:.9;">Quick actions & map controls</small>
            <p class="mb-0 mt-2" style="font-size:13px; line-height:1.3; opacity:0.95;">
              Welcome to Delectroit, a mapping project showcasing Detroit's vibrant sound art scene. Explore the locations of various sound installations and venues across the city.
              <br><strong>Created:</strong> 2021 ADD DESCRIPTION
            </p>
          </div>

          <div class="btn-group ms-2" role="group" aria-label="Nav controls" style="align-self:flex-start;">
            <button type="button" class="btn btn-sm btn-light" title="Show project description"
              onclick="(function(){ var modal=document.getElementById('navModal'); var body=modal.querySelector('.modal-body'); body.innerHTML = '<p class=&quot;mb-2&quot;><strong>Delectroit:</strong> Interactive map of Detroit sound-art venues and installations. Click markers for details.</p>'; })()">
              <i class="bi bi-info-circle-fill"></i>
            </button>
 
             <button type="button" class="btn btn-sm btn-outline-light" title="Toggle purple header help"
               onclick="(function(btn){ var sub=document.getElementById('navModalSub'); sub.textContent = sub.textContent.startsWith('Quick') ? 'Use the icons to quickly control the map.' : 'Quick actions & map controls'; })(this)">
               <i class="bi bi-sliders"></i>
             </button>
           </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        var zoomEl = document.getElementById('zoom-detroit');
        if (zoomEl) {
          zoomEl.addEventListener('click', function(e){
            e.preventDefault();
            map.setView([42.3314, -83.0458], 14);
            var modalEl = document.getElementById('navModal');
            var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
            modal.hide();
          });
        }

        var fitEl = document.getElementById('fit-markers');
        if (fitEl) {
          fitEl.addEventListener('click', function(e){
            e.preventDefault();
            if (allMarkers.getLayers().length) map.fitBounds(allMarkers.getBounds().pad(0.1));
            var modalEl = document.getElementById('navModal');
            var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
            modal.hide();
          });
        }
        </nav>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Startup modal that appears on page load - edit the content below -->
<style>
  /* local styles for the startup modal */
  #startupModal .modal-header {
    background: linear-gradient(90deg,#9775d7,#7d51a1);
    color: #fff;
    border-bottom: none;
    align-items:center;
  }
  #startupModal .modal-title {
    margin:0;
    font-weight:600;
  }
  #startupModal .startup-badge {
    width:44px;
    height:44px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    background: rgba(255,255,255,0.12);
    border-radius:8px;
    margin-right:10px;
    font-size:20px;
  }
  #startupModal .modal-body { font-size:14px; color:#2b0b4d; }
  #startupModal .tip { font-weight:500; margin-bottom:8px; }
  #startupModal .small-muted { opacity:0.85; font-size:13px; }
  #startupModal .dont-show { display:flex; align-items:center; gap:8px; }
  #startupModal img.startup-img { width:100%; max-height:120px; object-fit:cover; border-radius:6px; display:block; margin-bottom:8px; }
  #startupModal .modal-footer { display:flex; gap:8px; justify-content:space-between; align-items:center; flex-wrap:wrap; }
  @media (min-width:560px){
    #startupModal .modal-body-flex { display:flex; gap:12px; }
    #startupModal .text-col { flex:1; }
    #startupModal .img-col { width:160px; flex:0 0 160px; }
  }
</style>

<div class="modal fade" id="startupModal" tabindex="-1" aria-labelledby="startupModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <div style="display:flex; align-items:center; gap:10px; width:100%;">
          <div class="startup-badge" aria-hidden="true">
            <i class="bi bi-speaker-fill" style="color:#fff;"></i>
          </div>
          <div style="flex:1;">
            <h5 class="modal-title" id="startupModalLabel">Welcome to Delectroit</h5>
            <small class="small-muted">Explore sound art & venues across Detroit.</small>
          </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <div class="modal-body-flex">
          <div class="text-col">
            <!-- startup tip removed -->
            <div class="small-muted">
              Click markers for details, or use the Menu to zoom and fit markers.
            </div>

            <div style="margin-top:12px;" class="dont-show">
              <input type="checkbox" id="dontShow" />
              <label for="dontShow" style="margin:0; font-size:13px;">Don't show this again</label>
            </div>
          </div>

          <!-- image removed -->
        </div>
      </div>

      <div class="modal-footer">
        <div style="display:flex; gap:8px;">
          <button id="exploreBtn" type="button" class="btn btn-sm btn-primary">Explore map</button>
          <button type="button" class="btn btn-sm btn-outline-light" data-bs-dismiss="modal">Close</button>
        </div>
        <small class="small-muted">v1 • Delectroit (BHY)</small>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  var modalEl = document.getElementById('startupModal');
  if (!modalEl) return;

  // "Don't show again" handling
  var dont = modalEl.querySelector('#dontShow');
  if (dont) {
    dont.addEventListener('change', function(){
      try {
        if (dont.checked) localStorage.setItem('hideStartupModal','true');
        else localStorage.removeItem('hideStartupModal');
      } catch(e){}
    });
  }

  // "Explore map" button: zoom to Detroit and close
  var exploreBtn = modalEl.querySelector('#exploreBtn');
  if (exploreBtn) {
    exploreBtn.addEventListener('click', function(){
      if (window.map && typeof map.setView === 'function') map.setView([42.3314,-83.0458],14);
      var modalInstance = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
      modalInstance.hide();
    });
  }

  // On DOMContentLoaded, if user asked not to show again, remove the modal element so it won't appear
  document.addEventListener('DOMContentLoaded', function(){
    try {
      if (localStorage.getItem('hideStartupModal') === 'true') {
        modalEl.parentNode && modalEl.parentNode.removeChild(modalEl);
      }
    } catch(e){}
  });
})();
</script>

<script>
// center on Detroit, MI (zoomed in a bit more)
var map = L.map('map').setView([42.3314, -83.0458], 14);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { 
    maxZoom: 19,
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// (Removed duplicate default markers — keep only the speakerIcon markers below)

// ensure Leaflet recalculates size if the viewport changes
// feature group to collect markers for "fit" action
var allMarkers = L.featureGroup();
// wait a moment for tiles/DOM to settle, then invalidate size, collect markers and fit bounds
setTimeout(function(){
  map.invalidateSize();
  // collect markers already added to the map into the feature group
  map.eachLayer(function(layer){
    if (layer instanceof L.Marker) allMarkers.addLayer(layer);
  });
  if (allMarkers.getLayers().length) map.fitBounds(allMarkers.getBounds().pad(0.1));
}, 300);
window.addEventListener('resize', function(){ map.invalidateSize(); });



// Use a Bootstrap Icon inside a divIcon
const biHtml = `<i class="bi bi-speaker-fill bi-marker" aria-hidden="true"></i>`;
const speakerIcon = L.divIcon({
  className: '',           // keep empty so only our <i> styles apply
  html: biHtml,
  iconSize: [28,28],
  iconAnchor: [14,14],
  popupAnchor: [0,-14]
});

// apply to markers
L.marker([42.3280226, -83.0448932], {icon: speakerIcon}).addTo(map)
 .bindPopup(`<div><img src="Assets/Hart_Plaza_Detroit.jpg" alt="Hart Plaza" class="popup-img"><div class="popup-center"><strong>Hart Plaza</strong></div><div><P>Created: 1975 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Hart Plaza</li>
      <li><strong>Address:</strong><br />1 Hart Plaza, Detroit, MI 48226, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3630469, -83.0852008], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/marble_bar.jpg" alt="Marble Bar" class="popup-img"><div class="popup-center"><strong>Marble Bar</strong></div><div><P>Created: 2015 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Marble Bar</li>
      <li><strong>Address:</strong><br />1501 Holden St, Detroit, MI 48208, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3580524, -83.0167091], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="Assets/Spot Lite.jpg" alt="Spot Lite" class="popup-img"><div class="popup-center"><strong>Spot Lite Detroit</strong></div><div><P>Created: 2021 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Spot Lite Detroit</li>
      <li><strong>Address:</strong><br />2905 Beaufait St, Detroit, MI 48207, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3726414, -83.0635704], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/tangent_gallery.jpg" alt="Tangent Gallery and Hastings Street Ballroom" class="popup-img"><div class="popup-center"><strong>Tangent Gallery &amp; Hastings Street Ballroom</strong></div><div><P>Created: 1999 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Tangent Gallery &amp; Hastings Street Ballroom</li>
      <li><strong>Address:</strong><br />715 Milwaukee Ave, Detroit, MI 48202, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3380472, -83.0625672], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/tv_lounge.jpg" alt="TV Lounge" class="popup-img"><div class="popup-center"><strong>TV Lounge</strong></div><div><P>Created: 2007 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> TV Lounge</li>
      <li><strong>Address:</strong><br />2548 Grand River Ave, Detroit, MI 48201, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3336153, -83.0548439], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/city_club.jpg" alt="Leland City Club" class="popup-img"><div class="popup-center"><strong>Leland City Club</strong></div><div><P>Created: 1983 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Leland City Club</li>
      <li><strong>Address:</strong><br />400 Bagley St, Detroit, MI 48226, USA</li>
      <li><strong>Website:</strong> <a href="https://lelandcityclub.net/" target="_blank" rel="noopener">Leland City Club</a></li>
    </ul>
  </div>`);

L.marker([42.3626399, -83.0819244], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/lncln_fctry.jpg" alt="The Lincoln Factory" class="popup-img"><div class="popup-center"><strong>The Lincoln Factory</strong></div><div><P>Created: 1908 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> The Lincoln Factory</li>
      <li><strong>Address:</strong><br />1240 Holden St, Detroit, MI 48202, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3311594, -83.0730077], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/mcw.jpg" alt="Motor City Wine" class="popup-img"><div class="popup-center"><strong>Motor City Wine</strong></div><div><P>Created: (date n/a) ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Motor City Wine</li>
      <li><strong>Address:</strong><br />1949 Michigan Ave, Detroit, MI 48216, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3338199, -83.0499098], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/spkr_box.jpg" alt="SPKR BOX" class="popup-img"><div class="popup-center"><strong>SPKRBOX</strong></div><div><P>Created: 2022 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> SPKRBOX</li>
      <li><strong>Address:</strong><br />1501 Holden St, Detroit, MI 48208, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3668187, -83.0767079], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/northern_lights.jpg" alt="Northern Lights Lounge" class="popup-img"><div class="popup-center"><strong>Northern Lights Lounge</strong></div><div><P>Created: 2004 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Paramita Sound</li>
      <li><strong>Address:</strong><br />1517 Broadway St, Detroit, MI 48226, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

L.marker([42.3791133, -83.0592492], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/northern_lights.jpg" alt="Northern Lights Lounge" class="popup-img"><div class="popup-center"><strong>Northern Lights Lounge</strong></div><div><P>Created: 2004 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Russell</li>
      <li><strong>Address:</strong><br />1600 Clay St, Detroit, MI 48211, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

  L.marker([42.3440836, -83.0615332], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/northern_lights.jpg" alt="Northern Lights Lounge" class="popup-img"><div class="popup-center"><strong>Northern Lights Lounge</strong></div><div><P>Created: 2004 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Shipping Co.</li>
      <li><strong>Address:</strong><br />474 Peterboro St, Detroit, MI 48201, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

  L.marker([42.3754522, -83.0654343], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/northern_lights.jpg" alt="Northern Lights Lounge" class="popup-img"><div class="popup-center"><strong>Northern Lights Lounge</strong></div><div><P>Created: 2004 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Red Door</li>
      <li><strong>Address:</strong><br />7500 Oakland Ave, Detroit, MI 48211, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

  L.marker([42.3511427, -83.060109], {icon: speakerIcon}).addTo(map)
  .bindPopup(`<div><img src="images/northern_lights.jpg" alt="Northern Lights Lounge" class="popup-img"><div class="popup-center"><strong>Northern Lights Lounge</strong></div><div><P>Created: 2004 ADD DESCRIPTION</div>
    <ul>
      <li><strong>Name:</strong> Magic Stick</li>
      <li><strong>Address:</strong><br />4120 Woodward Ave, Detroit, MI 48201, USA</li>
      <li><strong>Website:</strong> <a href="#" target="_blank" rel="noopener"></a></li>
    </ul>
  </div>`);

// Modal actions
document.getElementById('zoom-detroit').addEventListener('click', function(e){
  e.preventDefault();
  map.setView([42.3314, -83.0458], 14);
  // close modal via Bootstrap API
  var modalEl = document.getElementById('navModal');
  var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
  modal.hide();
});

document.getElementById('fit-markers').addEventListener('click', function(e){
  e.preventDefault();
  if (allMarkers.getLayers().length) map.fitBounds(allMarkers.getBounds().pad(0.1));
  var modalEl = document.getElementById('navModal');
  var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
  modal.hide();
});

// About link in top navbar: close nav modal if open then navigate
var aboutEl = document.getElementById('about-link');
if (aboutEl) {
  aboutEl.addEventListener('click', function(e){
    e.preventDefault();
    var modalEl = document.getElementById('navModal');
    if (modalEl) {
      var modalInstance = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
      modalInstance.hide();
    }
    setTimeout(function(){ window.location.href = 'about.html'; }, 200);
  });
}

// Teams link in nav modal: hide modal then navigate
var teamsModalEl = document.getElementById('teams-link-modal');
if (teamsModalEl) {
  teamsModalEl.addEventListener('click', function(e){
    e.preventDefault();
    var modalEl = document.getElementById('navModal');
    var modalInstance = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
    modalInstance.hide();
    setTimeout(function(){ window.location.href = 'teams.html'; }, 200);
  });
}

// Optional: add a small Leaflet control button that opens the same modal
var NavControl = L.Control.extend({
  onAdd: function(map){
    var btn = L.DomUtil.create('button', 'btn btn-sm btn-primary');
    btn.innerHTML = 'Menu';
    btn.style.margin = '6px';
    btn.onclick = function(){
      var modalEl = document.getElementById('navModal');
      var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
      modal.show();
    };
    return btn;
  },
  onRemove: function(map){}
});
(new NavControl({ position: 'topright' })).addTo(map);
  
// show startup modal on page load
document.addEventListener('DOMContentLoaded', function(){
  var modalEl = document.getElementById('startupModal');
  if (modalEl) {
    var modal = new bootstrap.Modal(modalEl);
    modal.show();
  }
});
</script>
<!-- copy into the <head> of about.html / teams.html -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style> body { padding-top: 160px; } </style>
</body>
</html>