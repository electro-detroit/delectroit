<!DOCTYPE html>
<html>
<head>
    <!--Bootstrap framework-->
    <!-- Bootstrap CSS (needed for modal styling) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
    <!--Leaflet CSS (latest)-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@latest/dist/leaflet.css" />
    <!--Leaflet JS (latest)-->
    <script src="https://unpkg.com/leaflet@latest/dist/leaflet.js"></script>

    <title>Delectroit</title>

  <style>
html { height: 100% }
body { height: 100%; margin: 0; padding: 0; }
.map { height: 100% }

/* floating nav button */
.nav-btn {
  position: absolute;
  top: 12px;
  left: 12px;
  z-index: 1000; /* above the map */
}
  </style>

</head>
<body>
<div id="map" class="map"></div>

<!-- floating nav button (Bootstrap) -->
<button type="button" class="btn btn-primary nav-btn" data-bs-toggle="modal" data-bs-target="#navModal">
  Menu
</button>

<!-- Nav modal -->
<div class="modal fade" id="navModal" tabindex="-1" aria-labelledby="navModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="navModalLabel">Delectroit — Navigation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <nav class="nav flex-column">
          <a class="nav-link" href="#" id="zoom-detroit">Zoom to Detroit</a>
          <a class="nav-link" href="#" id="fit-markers">Fit all markers</a>
          <a class="nav-link" href="#" id="about-link">About</a>
        </nav>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Startup modal that appears on page load - edit the content below -->
<div class="modal fade" id="startupModal" tabindex="-1" aria-labelledby="startupModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="startupModalLabel">Welcome to Delectroit</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Edit this text to change what appears on load -->
        <p>Hello — this is a short info box. Add any text or HTML here to show when the page loads.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
// center on Detroit, MI
var map = L.map('map').setView([42.3314, -83.0458], 12);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { 
    maxZoom: 19,
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// add a marker at downtown Detroit
L.marker([42.3314, -83.0458]).addTo(map)
  .bindPopup('<strong>Detroit, MI</strong>').openPopup();

// ensure Leaflet recalculates size if the viewport changes
setTimeout(function(){ map.invalidateSize(); }, 200);
window.addEventListener('resize', function(){ map.invalidateSize(); });

//Icon
var myIcon = L.icon({
    iconUrl: 'my-icon.png',
    iconSize: [38, 95],
    iconAnchor: [22, 94],
    popupAnchor: [-3, -76],
    shadowUrl: 'my-icon-shadow.png',
    shadowSize: [68, 95],
    shadowAnchor: [22, 94]
});
L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);

var marker = L.marker([42.3280226, -83.0448932]).addTo(map);
marker.bindPopup("<b><center>Hart Plaza</center></b>Hart Plaza :).");

var marker = L.marker([42.3630469, -83.0852008]).addTo(map);
marker.bindPopup("<b><center>Marble Bar</center></b>Marble Bar :).");

var marker = L.marker([42.3580524, -83.0167091]).addTo(map);
marker.bindPopup("<b><center>Spot Lite</center></b>Spot Lite :).");

var marker = L.marker([42.3726414, -83.0635704]).addTo(map);
marker.bindPopup("<b><center>Tangent Gallery and Hasting Street Ballroom</center></b>Tangent Gallery and Hasting Street Ballroom :).");

var marker = L.marker([42.3380472, -83.0625672]).addTo(map);
marker.bindPopup("<b><center>T+V Lounge</center></b>T+V Lounge :).");

var marker = L.marker([42.3336153, -83.0548439]).addTo(map);
marker.bindPopup("<b><center>City Club</center></b>Leland City Club :).");

var marker = L.marker([42.3626399, -83.0819244]).addTo(map);
marker.bindPopup("<b><center>LNCLN FCTRY</center></b>The Lincoln Factory :).");

var marker = L.marker([42.3311594, -83.0730077]).addTo(map);
marker.bindPopup("<b><center>MCW</center></b>Motor City Wine :).");

var marker = L.marker([42.3338199, -83.0499098]).addTo(map);
marker.bindPopup("<b><center>SPKR BOX</center></b>SPKRBOX :).");

var marker = L.marker([42.3668187, -83.0767079]).addTo(map);
marker.bindPopup("<b><center>NORTHERN LIGHTS </center></b>Northern Lights Lounge :).");

<!-- Harry add your five locations here --> 

// collect all markers into a layer group for "fit" action
var allMarkers = L.featureGroup();
map.eachLayer(function(layer){
  if (layer instanceof L.Marker) allMarkers.addLayer(layer);
});

// Modal actions
document.getElementById('zoom-detroit').addEventListener('click', function(e){
  e.preventDefault();
  map.setView([42.3314, -83.0458], 13);
  // close modal via Bootstrap API
  var modalEl = document.getElementById('navModal');
  var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
  modal.hide();
});

document.getElementById('fit-markers').addEventListener('click', function(e){
  e.preventDefault();
  if (allMarkers.getLayers().length) map.fitBounds(allMarkers.getBounds().pad(0.1));
  var modalEl = document.getElementById('navModal');
  var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
  modal.hide();
});

document.getElementById('about-link').addEventListener('click', function(e){
  e.preventDefault();
  alert('Delectroit — mapping project'); // replace with nicer UI as needed
});

// Optional: add a small Leaflet control button that opens the same modal
var NavControl = L.Control.extend({
  onAdd: function(map){
    var btn = L.DomUtil.create('button', 'btn btn-sm btn-primary');
    btn.innerHTML = 'Menu';
    btn.style.margin = '6px';
    btn.onclick = function(){
      var modalEl = document.getElementById('navModal');
      var modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
      modal.show();
    };
    return btn;
  },
  onRemove: function(map){}
});
(new NavControl({ position: 'topright' })).addTo(map);

// show startup modal on page load
document.addEventListener('DOMContentLoaded', function(){
  var modalEl = document.getElementById('startupModal');
  if (modalEl) {
    var modal = new bootstrap.Modal(modalEl);
    modal.show();
  }
});
</script>
</body>
</html>